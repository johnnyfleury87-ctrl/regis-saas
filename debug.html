<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <title>Debug - R√©gis SaaS</title>
</head>
<body>
    <h1>üîç Diagnostic Syst√®me</h1>
    <div id="results"></div>

    <script type="module">
        const results = document.getElementById('results');
        let report = '';

        // 1. Test import Supabase
        report += '<h2>1. Test import Supabase CDN</h2>';
        try {
            const { createClient } = await import('https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2/+esm');
            report += '‚úÖ Import CDN Supabase : OK<br>';
            
            // 2. Test cr√©ation client
            const supabase = createClient(
                "https://mkcjwhkcqfjgaoqjbmsy.supabase.co",
                "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im1rY2p3aGtjcWZqZ2Fxb2pibXN5Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjQwNDg4ODMsImV4cCI6MjA3OTYyNDg4M30.XANf4CpYvG8U1S_9OGuIPPK_NkvfmwrT0XHfVTpOIdY"
            );
            report += '‚úÖ Client Supabase cr√©√© : OK<br>';
            
            // 3. Test connexion √† Supabase
            report += '<h2>2. Test connexion Supabase</h2>';
            const { data, error } = await supabase.auth.signInWithPassword({
                email: 'test@invalid.com',
                password: 'wrongpassword'
            });
            
            if (error) {
                if (error.message.includes('Invalid')) {
                    report += '‚úÖ Connexion Supabase : OK (erreur attendue pour mauvais credentials)<br>';
                    report += `Message: ${error.message}<br>`;
                } else {
                    report += `‚ùå Erreur inattendue: ${error.message}<br>`;
                }
            }
            
        } catch (err) {
            report += `‚ùå Erreur fatale: ${err.message}<br>`;
            report += `Stack: ${err.stack}<br>`;
        }

        // 4. Infos syst√®me
        report += '<h2>3. Informations syst√®me</h2>';
        report += `URL actuelle: ${window.location.href}<br>`;
        report += `User Agent: ${navigator.userAgent}<br>`;
        report += `Date test: ${new Date().toLocaleString('fr-FR')}<br>`;

        results.innerHTML = report;
    </script>
</body>
</html>
