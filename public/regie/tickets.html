<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8" />
    <title>Tickets – Régie</title>
    <!-- IMPORTANT: Assurez-vous que le CSS est bien lié au bon fichier -->
    <link rel="stylesheet" href="regie.css" />
    <script defer src="tickets.js"></script>
</head>

<body>
    <div class="page-header">
        <a href="index.html" class="btn btn-secondary">← Retour au tableau de bord</a>
        <h1>Tickets</h1>
        <p>Suivi des interventions locataires</p>
    </div>

    <!-- Filtres de statut avec le nouveau design -->
    <div class="status-filters" id="status-filters">
        <button class="filter-btn active" data-filter="all">Tous (<span data-count="all">0</span>)</button>
        <button class="filter-btn" data-filter="nouveaux">Nouveaux (<span data-count="nouveaux">0</span>)</button>
        <button class="filter-btn" data-filter="en_cours">En cours (<span data-count="en_cours">0</span>)</button>
        <button class="filter-btn" data-filter="termine">Terminés (<span data-count="termine">0</span>)</button>
    </div>

    <!-- Grille pour les cartes de tickets -->
    <div id="tickets-container" class="tickets-grid">
        <!-- Le contenu sera chargé par tickets.js -->
    </div>

    <!-- État si aucun ticket n'est trouvé -->
    <div id="empty-state" class="empty-state hidden">
        <h2>Aucun ticket trouvé</h2>
        <p>Il n'y a aucun ticket correspondant à ce filtre.</p>
    </div>

    <!-- ========================================================== -->
    <!--     HTML DU POP-UP D'ASSIGNATION (MODAL) - INCHANGÉ          -->
    <!-- ========================================================== -->
    <div id="assign-modal" class="modal-overlay hidden">
        <div class="modal-content">
            <header class="modal-header">
                <h2>Publier une mission</h2>
                <button id="close-modal-btn" class="close-btn">&times;</button>
            </header>
            <main class="modal-body">
                <div class="form-group">
                    <label for="priorite-select">Niveau d'urgence</label>
                    <select id="priorite-select">
                        <option value="P4">P4 - Basse</option>
                        <option value="P3">P3 - Moyenne</option>
                        <option value="P2">P2 - Haute</option>
                        <option value="P1">P1 - Urgente</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="budget-input">Plafond budgétaire (CHF)</label>
                    <input type="number" id="budget-input" placeholder="Ex: 500" />
                </div>
            </main>
            <footer class="modal-footer">
                <!-- Bouton stylisé avec les nouvelles classes -->
                <button id="publish-mission-btn" class="btn btn-primary">Publier la mission</button>
            </footer>
        </div>
    </div>
</body>
</html>