<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <title>Espace R√©gie</title>
    <link rel="stylesheet" href="regie.css">
    
    <!-- Ce script est pour la page des tickets, on le laisse de c√¥t√© ici -->
    <!-- <script src="/regie/regie.js" defer></script> -->
</head>

<body>

<header>
    <h1>Espace R√©gie</h1>
    <p class="subtitle">Bienvenue üëã</p>
</header>

<div class="grid">

    <!-- Locataires -->
    <div class="card" onclick="goTo('locataires.html')">
        <h2>Gestion des locataires</h2>
        <p>Ajouter, modifier ou supprimer un locataire</p>
    </div>

    <!-- Tickets (avec badges) -->
    <div class="card ticket-card" onclick="goTo('tickets.html')">
        <h2>Gestion des tickets</h2>
        <p>Suivi complet des interventions</p>

        <!-- Badges (g√©r√©s par regie.js) -->
        <div class="badge-container">
            <span id="badge-new" class="badge badge-red">0</span>
            <span id="badge-progress" class="badge badge-orange">0</span>
        </div>
    </div>

    <!-- Entreprises -->
    <div class="card" onclick="goTo('entreprises.html')">
        <h2>Gestion des entreprises</h2>
        <p>G√©rer vos partenaires et prestataires</p>
    </div>

    <!-- Factures -->
    <div class="card" onclick="goTo('factures.html')">
        <h2>Gestion des factures</h2>
        <p>Consulter et suivre les factures</p>
    </div>

    <!-- Param√®tres -->
    <div class="card" onclick="goTo('compte.html')">
        <h2>Param√®tres</h2>
        <p>Gestion de votre compte</p>
    </div>

    <!-- D√©connexion -->
    <div class="card logout" onclick="location.href='/login.html'">
        <h2>D√©connexion</h2>
        <p>Se d√©connecter de l‚Äôapplication</p>
    </div>

</div>

<!-- ======================================================= -->
<!-- =============   NOUVEAU SCRIPT AJOUT√â   =============== -->
<!-- ======================================================= -->
<script>
    /**
     * Cette fonction redirige vers une page donn√©e tout en conservant 
     * le 'regieId' pr√©sent dans l'URL.
     * @param {string} page - La page de destination (ex: "tickets.html").
     */
    function goTo(page) {
        // 1. On r√©cup√®re les param√®tres de l'URL actuelle
        const params = new URLSearchParams(window.location.search);
        const regieId = params.get('regieId');

        if (regieId) {
            // 2. Si on a un regieId, on redirige vers la nouvelle page en l'incluant
            window.location.href = `${page}?regieId=${regieId}`;
        } else {
            // 3. Sinon, on redirige simplement (cas de secours)
            window.location.href = page;
        }
    }
</script>
<!-- ======================================================= -->
<!-- ==================   FIN DU SCRIPT   ================== -->
<!-- ======================================================= -->

</body>
</html>